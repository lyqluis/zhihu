(function(t){function e(e){for(var n,r,o=e[0],c=e[1],u=e[2],l=0,d=[];l<o.length;l++)r=o[l],i[r]&&d.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);f&&f(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var o=a[r];0!==i[o]&&(n=!1)}n&&(s.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},r={app:0},i={app:0},s=[];function o(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-3a2bf0ca":"fedfef51","chunk-4ef210bc":"39503f7e","chunk-e1320c1c":"a4a4550a"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-3a2bf0ca":1,"chunk-4ef210bc":1,"chunk-e1320c1c":1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise(function(e,a){for(var n="css/"+({}[t]||t)+"."+{"chunk-3a2bf0ca":"1f917e8f","chunk-4ef210bc":"54bb9385","chunk-e1320c1c":"6a0e49f5"}[t]+".css",i=c.p+n,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var u=s[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===i))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===n||l===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");s.request=n,delete r[t],f.parentNode.removeChild(f),a(s)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){r[t]=0}));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise(function(e,a){n=i[t]=[e,a]});e.push(n[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t),u=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+n+": "+r+")");s.type=n,s.request=r,a[1](s)}i[t]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"18c2":function(t,e,a){},1927:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("7f7f"),a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:t.trans,mode:""}},[a("router-view",{staticClass:"view"})],1)],1)},i=[],s=a("bb51"),o={name:"app",components:{Home:s["default"]},data:function(){return{trans:""}},watch:{$route:function(t,e){"home"===t.name&&null===e.name?this.trans="":this.trans=t.meta.index>e.meta.index?"move2right":"move2left"}},methods:{}},c=o,u=(a("a6ff"),a("2877")),l=Object(u["a"])(c,r,i,!1,null,"2adbe690",null),d=l.exports,f=a("795b"),p=a.n(f),m=a("8c4f");n["default"].use(m["a"]);var h=new m["a"]({routes:[{path:"/",name:"home",meta:{index:0},component:function(){return Promise.resolve().then(a.bind(null,"bb51"))}},{path:"/article/:id",name:"article",meta:{index:1},component:function(){return a.e("chunk-3a2bf0ca").then(a.bind(null,"3ad6"))}},{path:"/comments",name:"comments",meta:{index:2},component:function(){return a.e("chunk-4ef210bc").then(a.bind(null,"0bef"))}},{path:"/writeboard",name:"writeboard",meta:{index:3},component:function(){return a.e("chunk-e1320c1c").then(a.bind(null,"0717"))}}],scrollBehavior:function(t,e,a){return a||new p.a(function(t,e){setTimeout(function(){t({x:0,y:0})},300)})}}),v=a("bc3a"),g=a.n(v),b=a("75fc"),w=a("2f62");n["default"].use(w["a"]);var y=new w["a"].Store({state:{idList:[],nowId:0,longComment:0,shotComment:0,commentNum:0},mutations:{GET_ID_LIST:function(t,e){t.idList=[].concat(Object(b["a"])(t.idList),Object(b["a"])(e))},CLEAR_ID_LIST:function(t,e){t.idList=e},getId:function(t,e){t.nowId=e},next2now:function(t){t.nowId=t.idList[t.idList.indexOf(t.nowId)+1]},getCommentNum:function(t,e){t.commentNum+=e}},actions:{}}),x=a("76a0"),D=(a("1927"),100);function T(){var t=document.documentElement.clientWidth/375;document.documentElement.style.fontSize=D*Math.min(t,2)+"px"}T(),window.onresize=function(){T()};a("aa35");n["default"].config.productionTip=!1,n["default"].use(x["InfiniteScroll"]),n["default"].component(x["Popup"].name,x["Popup"]),n["default"].use(x["Lazyload"]),n["default"].use(x["Indicator"]),n["default"].component(x["DatetimePicker"].name,x["DatetimePicker"]),n["default"].component(x["Spinner"].name,x["Spinner"]),n["default"].prototype.$axios=g.a,new n["default"]({router:h,store:y,render:function(t){return t(d)}}).$mount("#app")},"5af8":function(t,e,a){"use strict";var n=a("67b0"),r=a.n(n);r.a},"67b0":function(t,e,a){},"78f6":function(t,e,a){"use strict";var n=a("18c2"),r=a.n(n);r.a},"8ac2":function(t,e,a){"use strict";var n=a("c1b6"),r=a.n(n);r.a},a474:function(t,e,a){"use strict";var n=a("76d3"),r=a.n(n),i=(a("ac6a"),"https://bird.ioliu.cn/v1?url="),s="https://news-at.zhihu.com/api/4/",o={newsLatest:"news/latest",newsBefore:"news/before/",storyExtra:"story-extra/",story:"story/",news:"news/"};r()(o).forEach(function(t){o[t]=i+s+o[t]}),e["a"]=o},a6ff:function(t,e,a){"use strict";var n=a("b679"),r=a.n(n);r.a},b679:function(t,e,a){},bb51:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"headmenu"},[a("div",{staticClass:"title"},[t._v("今日热文")]),a("div",{staticClass:"search",on:{click:t.openSearch}},[a("i",{class:t.searchDate.getTime()===t.endDate.getTime()?"icon-rili":"icon-rili active"})])]),a("div",{staticClass:"slide-wrapper"},[a("slide")],1),a("div",{staticClass:"list-wrapper"},[a("articlelist",{attrs:{searchDate:t.searchDate},on:{deliverDate:t.deliverDate}})],1),a("div",{staticClass:"pick-wrapper"},[a("mt-datetime-picker",{ref:"picker",attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日",startDate:t.startDate,endDate:t.endDate},on:{confirm:t.handleDate},model:{value:t.pickerDate,callback:function(e){t.pickerDate=e},expression:"pickerDate"}})],1)])},r=[],i=a("e814"),s=a.n(i),o=(a("cadf"),a("551c"),a("f751"),a("097d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slide"},[a("div",{ref:"itemWrapper",staticClass:"slide-item-wrapper"},t._l(t.pics,function(e,n){return a("div",{key:n,ref:"slideItem"+n,refInFor:!0,staticClass:"slide-item",on:{click:function(a){return t.openArticle(a,e.id)}}},[a("img",{attrs:{src:t.replaceUrl(e.image),alt:""}}),a("div",{staticClass:"title"},[t._v(t._s(e.title))])])}),0)])}),c=[],u=(a("a481"),a("59ad")),l=a.n(u),d=a("a474"),f={components:{},data:function(){return{pics:[],index:0,step:0,userScrolling:!1,dragging:!1}},created:function(){this.getData(),this.dragState={}},mounted:function(){var t=this,e=this.$el;e.addEventListener("touchstart",function(e){t.doOnTouchStart(e)}),e.addEventListener("touchmove",function(e){t.doOnTouchMove(e)}),e.addEventListener("touchend",function(e){if(t.userScrolling)return t.dragging=!1,void(t.dragState={});t.doOnTouchEnd(e),t.dragging=!1})},updated:function(){this.initialMove()},computed:{},methods:{getData:function(){var t=this;this.$axios(d["a"].newsLatest).then(function(e){t.pics=e.data.top_stories}).catch(function(t){console.log(t)})},initialMove:function(){this.step=this.$refs.slideItem0[0].offsetWidth;var t=window.getComputedStyle(this.$refs.slideItem0[0])["marginLeft"];t=l()(t),this.step+=2*t},doOnTouchStart:function(){var t=this.$el,e=this.dragState,a=event.touches[0];e.startTime=new Date,e.startLeft=a.pageX,e.startTop=a.pageY,e.startTopAbsolute=a.clientY;var n=this.$refs.itemWrapper.style.transform;e.wrapperStart=l()(n.replace(/[^-?0-9\.]/g,""))||0,e.pageWidth=this.step,e.dragPage=t.children[0]},doOnTouchMove:function(t){var e=this.dragState,a=t.touches[0];e.currentLeft=a.pageX,e.currentTop=a.pageY,e.currentTopAbsolute=a.clientY;var n=e.currentLeft-e.startLeft,r=e.currentTopAbsolute-e.startTopAbsolute,i=Math.abs(n),s=Math.abs(r);if(i<5||i>=5&&s>=1.73*i)this.userScrolling=!0;else{this.userScrolling=!1,t.preventDefault(),n=Math.min(Math.max(1-e.pageWidth,n),e.pageWidth-1);this.translate(e.dragPage,e.wrapperStart,n)}},translate:function(t,e,a,n,r){var i=this,s=arguments,o=e+a;if(n){this.animating=!0,t.style.webkitTransition="-webkit-transform "+n+"ms ease-in-out",setTimeout(function(){t.style.webkitTransform="translateX(".concat(o,"px)")},50);var c=!1,u=function(){c||(c=!0,i.animating=!1,t.style.webkitTransition="",t.style.webkitTransform="",r&&r.apply(i,s))};once(t,"webkitTransitionEnd",u),setTimeout(u,n+100)}else t.style.transition="all 0s linear",t.style.transform="translateX(".concat(o,"px)")},doOnTouchEnd:function(){var t=this.dragState,e=new Date-t.startTime,a=null,n=t.currentLeft-t.startLeft,r=t.currentTop-t.startTop,i=t.pageWidth,s=this.index,o=this.pics.length;if(e<300){Math.abs(n)<5&&Math.abs(r);(isNaN(n)||isNaN(r))&&!0}e<300&&void 0===t.currentLeft||((e>300||Math.abs(n)>i/3)&&(a=n<0?"next":"prev"),(0===s&&"prev"===a||s===o-1&&"next"===a)&&(a=null),"next"===a&&s++,"prev"===a&&s--,this.index=s,this.moveAnimation(s),this.dragState={})},moveAnimation:function(t){var e=-1,a=this.step*t*e;this.$refs.itemWrapper.style.transition="all 0.25s linear",this.$refs.itemWrapper.style.transform="translate("+a+"px)"},replaceUrl:function(t){return t.replace(/http\w{0,1}:\/\/p/g,"https://images.weserv.nl/?url=p")},openEffect:function(t){var e=t.target||t.srcElement;"slide-item"!==e.className&&(e=e.parentNode),"slide-item"==e.className&&(e.style.transform="scale(0.9)",e.style.boxShadow="0 5px 6px 4px rgba(0, 0, 0, 0.3)",setTimeout(function(){e.style.transform="scale(1)","first-news"==e.className?e.style.boxShadow="0 2px 4px 4px rgba(0, 0, 0, 0.1)":e.style.boxShadow=""},250))},openArticle:function(t,e){var a=this;this.$store.commit("getId",e),this.openEffect(t),setTimeout(function(){a.$router.push({name:"article",params:{id:e}})},300)}}},p=f,m=(a("5af8"),a("2877")),h=Object(m["a"])(p,o,c,!1,null,"8e5890d6",null),v=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article-list"},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadmore,expression:"loadmore"}],staticClass:"list-wrapper",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},[t._l(t.stories,function(e,n){return a("div",{key:n,staticClass:"oneday-wrapper"},[a("div",{staticClass:"date"},[a("div",{staticClass:"day"},[t._v(t._s(t.adjustDay(e.date)))]),t._v("\n        "+t._s(t.adjustDate(e.date))+"\n      ")]),a("ul",{staticClass:"list"},t._l(e.stories,function(e,n){return a("li",{key:n,class:0===n?"first":"",on:{click:function(a){return t.openArticle(a,e.id)}}},[0===n?a("div",{staticClass:"first-news"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.replaceUrl(e.images[0]),expression:"replaceUrl(news.images[0])"}],attrs:{alt:e.title}}),a("div",{staticClass:"title"},[t._v(t._s(e.title))])]):t._e(),n>0?a("div",{staticClass:"border"},[a("div",[t._v(t._s(e.title))]),a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.replaceUrl(e.images[0]),expression:"replaceUrl(news.images[0])"}],attrs:{alt:e.title}})]):t._e()])}),0)])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading"},[a("mt-spinner",{attrs:{type:"fading-circle"}})],1)],2)])},b=[],w=(a("ac6a"),a("28a5"),{name:"articleList",components:{},props:{searchDate:{type:Date,required:!0}},watch:{searchDate:function(){var t=this.searchDate.toLocaleDateString();t=t.replace(/\/|\-/g,"/");var e=t.split("/");e.forEach(function(t,a){t.length<2&&(e[a]="0"+t)});var a=e.join("");this.getTimeData(a)}},data:function(){return{stories:[],date:"",loading:!1,dateRange:[]}},created:function(){this.$store.commit("CLEAR_ID_LIST",[]),this.getLatestData()},methods:{getLatestData:function(){var t=this;this.$axios(d["a"].newsLatest).then(function(e){t.stories.push(e.data),t.date=e.data.date,t.today=e.data.date,t.getIdList(e.data.stories)})},getBeforeData:function(t){var e=this;this.$axios(d["a"].newsBefore+this.date).then(function(t){t.data.status||(e.date=t.data.date,e.stories.push(t.data),e.getIdList(t.data.stories))})},loadmore:function(){var t=this;this.loading||(this.loading=!0,setTimeout(function(){t.getBeforeData(),t.loading=!1},2e3))},getTimeData:function(t){t||this.getLatestData(),this.date=t,this.stories=[],this.loadmore()},adjustDate:function(t){if(this.today==t)return"Today";t.substr(0,4);var e=t.substr(4,2)+"月",a=t.substr(6,2)+"日";return e+a},adjustDay:function(t){var e=s()(t.substr(0,4)),a=s()(t.substr(4,2))-1,n=s()(t.substr(6,2)),r=new Date(e,a,n),i=r.getDay();switch(i){case 0:return"星期日";case 1:return"星期一";case 2:return"星期二";case 3:return"星期三";case 4:return"星期四";case 5:return"星期五";case 6:return"星期六"}},replaceUrl:function(t){return t.replace(/http\w{0,1}:\/\/p/g,"https://images.weserv.nl/?url=p")},openArticle:function(t,e){var a=this;this.$store.commit("getId",e),this.openEffect(t),setTimeout(function(){a.$router.push({name:"article",params:{id:e}})},300)},getIdList:function(t){var e=[];t.forEach(function(t){e.push(t.id)}),this.$store.commit("GET_ID_LIST",e)},openEffect:function(t){var e=t.target||t.srcElement;"border"===e.className&&"first-news"===e.className||(e=e.parentNode),"border"!=e.className&&"first-news"!=e.className||(e.style.transform="scale(0.9)",e.style.boxShadow="0 5px 6px 4px rgba(0, 0, 0, 0.3)",setTimeout(function(){e.style.transform="scale(1)","first-news"==e.className?e.style.boxShadow="0 2px 4px 4px rgba(0, 0, 0, 0.1)":e.style.boxShadow=""},250))}}}),y=w,x=(a("78f6"),Object(m["a"])(y,g,b,!1,null,"72b6b74c",null)),D=x.exports,T={name:"home",components:{Slide:v,Articlelist:D},data:function(){return{pickerDate:new Date,searchDate:new Date,startDate:new Date(2013,2,20),endDate:new Date}},methods:{openSearch:function(t){t.target||t.srcElement;this.$refs.picker.open()},handleDate:function(t){t.setTime(t.getTime()+864e5),this.searchDate=t},deliverDate:function(t){var e=s()(t.substr(0,4)),a=s()(t.substr(4,2))-1,n=s()(t.substr(6,2)),r=new Date(e,a,n);this.pickerDate=r}}},k=T,S=(a("8ac2"),Object(m["a"])(k,n,r,!1,null,"7be6a939",null));e["default"]=S.exports},c1b6:function(t,e,a){}});
//# sourceMappingURL=app.cf9faa76.js.map